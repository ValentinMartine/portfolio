<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Quiz Médicaments</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    body {
      background: #f7f7f7;
      color: #222;
      font-family: 'Inter', 'Roboto', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
    }
    #start-section, #quiz-section, #result-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      width: 100vw;
      background: #f7f7f7;
    }
    #start-section button {
      margin-top: 60px;
      margin-bottom: 40px;
      font-size: 2em;
      padding: 30px 70px;
      border-radius: 16px;
      background: #22577a;
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      display: block;
    }
    #start-section button:hover {
      background: #183654;
      transform: scale(1.06);
    }
    #quiz-section h3#question {
      font-size: 2.8em;
      font-weight: bold;
      margin: 40px 0 50px 0;
      text-align: center;
      max-width: 90vw;
    }
    #reponses {
      list-style: none;
      padding: 0;
      margin: 0 0 40px 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 32px;
    }
    #reponses button {
      font-size: 1.6em;
      padding: 24px 48px;
      min-width: 320px;
      border: none;
      border-radius: 12px;
      background: #22577a;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      box-shadow: 0 4px 24px #22577a22;
      text-align: center;
    }
    #reponses button:hover:enabled {
      background: #183654;
      transform: scale(1.04);
    }
    #reponse,
    .explication,
    #next-btn,
    #fin-btn {
      text-align: center;
      align-self: center;
    }
    #reponse {
      margin-top: 30px;
      font-size: 1.4em;
      text-align: center;
    }
    .explication {
      margin-top: 20px;
      font-size: 1.2em;
      max-width: 750px;
      text-align: center;
    }
    #next-btn, #fin-btn {
      margin-top: 40px;
      font-size: 1.3em;
      padding: 18px 48px;
      border-radius: 10px;
      background: #22577a;
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      display: block;
      text-align: center;
      align-self: center;
    }
    #next-btn:hover:enabled,
    #fin-btn:hover:enabled {
      background: #183654;
      transform: scale(1.04);
    }
    #result-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      width: 100vw;
      background: #f7f7f7;
    }
    #score {
      font-size: 2.2em;
      margin-top: 30px;
      text-align: center;
    }
    #result-section button {
      margin-top: 44px;
      font-size: 1.2em;
      padding: 16px 44px;
      border-radius: 10px;
      background: #22577a;
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      display: block;
      text-align: center;
      align-self: center;
    }
    #result-section button:hover {
      background: #183654;
      transform: scale(1.04);
    }
    @media (max-width: 700px) {
      #quiz-section h3#question {
        font-size: 1.5em;
        margin: 24px 0 30px 0;
      }
      #reponses button {
        font-size: 1.1em;
        min-width: 160px;
        padding: 14px 0;
      }
      #reponse, .explication {
        font-size: 1em;
        padding: 0 10px;
      }
      #next-btn, #fin-btn {
        font-size: 1em;
        padding: 12px 24px;
      }
      #score {
        font-size: 1.3em;
      }
      #result-section button {
        font-size: 1em;
        padding: 12px 24px;
      }
      #start-section button {
        font-size: 1.3em;
        padding: 18px 32px;
      }
    }
  </style>
</head>
<body>
  <div id="start-section">
    <button onclick="demarrerQuiz()">Commencer le quiz</button>
  </div>

  <section id="quiz-section" style="display:none;">
    <h3 id="question"></h3>
    <ul id="reponses"></ul>
    <div id="reponse"></div>
    <div class="explication" id="explication"></div>
    <button id="next-btn" onclick="questionSuivante()" style="display:none;">Question suivante</button>
    <!-- Le bouton fin-btn sera ajouté dynamiquement -->
  </section>

  <section id="result-section" style="display:none;">
    <div id="score"></div>
    <button onclick="demarrerQuiz()">Recommencer le quiz</button>
  </section>

  <script>
    // 10 questions avec explications
    const questions = [
      {
        question: "Quel est le principe actif du Doliprane ?",
        reponses: [
          { text: "Ibuprofène", correct: false },
          { text: "Paracétamol", correct: true },
          { text: "Aspirine", correct: false }
        ],
        explication: "Le principe actif du Doliprane est le paracétamol, utilisé comme antalgique et antipyrétique."
      },
      {
        question: "L'aspirine appartient à la classe des :",
        reponses: [
          { text: "Antibiotiques", correct: false },
          { text: "Anti-inflammatoires non stéroïdiens (AINS)", correct: true },
          { text: "Antiviraux", correct: false }
        ],
        explication: "L'aspirine est un AINS, c'est-à-dire un anti-inflammatoire non stéroïdien."
      },
      {
        question: "Le paracétamol est principalement utilisé pour :",
        reponses: [
          { text: "Réduire la fièvre et soulager la douleur", correct: true },
          { text: "Soigner une infection bactérienne", correct: false },
          { text: "Traiter les allergies", correct: false }
        ],
        explication: "Le paracétamol sert à réduire la fièvre et soulager la douleur."
      },
      {
        question: "Quel médicament est le plus adapté pour une inflammation ?",
        reponses: [
          { text: "Paracétamol", correct: false },
          { text: "Ibuprofène", correct: true },
          { text: "Paracétamol codéiné", correct: false }
        ],
        explication: "L'ibuprofène est un anti-inflammatoire, adapté pour traiter une inflammation."
      },
      {
        question: "L'antidote du paracétamol en cas de surdosage est :",
        reponses: [
          { text: "N-acétylcystéine", correct: true },
          { text: "Charbon actif", correct: false },
          { text: "Naloxone", correct: false }
        ],
        explication: "La N-acétylcystéine est l'antidote spécifique en cas de surdosage au paracétamol."
      },
      {
        question: "Quel médicament n’est PAS un antalgique ?",
        reponses: [
          { text: "Paracétamol", correct: false },
          { text: "Ibuprofène", correct: false },
          { text: "Amoxicilline", correct: true }
        ],
        explication: "L'amoxicilline est un antibiotique, pas un antalgique."
      },
      {
        question: "Quel effet secondaire est le plus fréquent avec les AINS ?",
        reponses: [
          { text: "Nausées", correct: false },
          { text: "Ulcères gastriques", correct: true },
          { text: "Somnolence", correct: false }
        ],
        explication: "Les AINS, comme l'ibuprofène, peuvent provoquer des ulcères gastriques."
      },
      {
        question: "On ne doit pas associer l’aspirine à :",
        reponses: [
          { text: "Du lait", correct: false },
          { text: "Un autre AINS", correct: true },
          { text: "Du paracétamol", correct: false }
        ],
        explication: "L'aspirine ne doit pas être associée à un autre AINS à cause du risque de saignements."
      },
      {
        question: "Le paracétamol est à éviter chez :",
        reponses: [
          { text: "Les personnes allergiques au gluten", correct: false },
          { text: "Les insuffisants hépatiques graves", correct: true },
          { text: "Les diabétiques", correct: false }
        ],
        explication: "Le paracétamol est contre-indiqué chez les personnes souffrant d’insuffisance hépatique grave."
      },
      {
        question: "Quel médicament est utilisé pour traiter une infection bactérienne ?",
        reponses: [
          { text: "Ibuprofène", correct: false },
          { text: "Amoxicilline", correct: true },
          { text: "Aspirine", correct: false }
        ],
        explication: "L’amoxicilline est un antibiotique efficace contre les infections bactériennes."
      }
    ];

    let questionsTirage = [];
    let currentQuestion = 0;
    let score = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function demarrerQuiz() {
      document.getElementById('start-section').style.display = 'none';
      document.getElementById('result-section').style.display = 'none';
      document.getElementById('quiz-section').style.display = 'flex';
      score = 0;
      currentQuestion = 0;
      // Tirer 3 questions au hasard
      questionsTirage = questions.slice();
      shuffle(questionsTirage);
      questionsTirage = questionsTirage.slice(0, 3);
      afficherQuestion();
      // On masque le bouton de fin s'il existe déjà
      const finBtn = document.getElementById('fin-btn');
      if (finBtn) finBtn.style.display = "none";
    }

    function afficherQuestion() {
      const q = questionsTirage[currentQuestion];
      document.getElementById('question').textContent = q.question;
      const ul = document.getElementById('reponses');
      ul.innerHTML = "";
      q.reponses.forEach((rep, idx) => {
        const li = document.createElement('li');
        const btn = document.createElement('button');
        btn.textContent = rep.text;
        btn.onclick = () => repondre(idx);
        btn.disabled = false;
        li.appendChild(btn);
        ul.appendChild(li);
      });
      document.getElementById('reponse').textContent = "";
      document.getElementById('reponse').style.color = "#222";
      document.getElementById('explication').textContent = "";
      document.getElementById('next-btn').style.display = "none";
      const finBtn = document.getElementById('fin-btn');
      if (finBtn) finBtn.style.display = "none";
    }

    function repondre(idx) {
      const q = questionsTirage[currentQuestion];
      // Désactive tous les boutons
      Array.from(document.querySelectorAll('#reponses button')).forEach(btn => btn.disabled = true);

      const bonne = q.reponses[idx].correct;
      const bonneRep = q.reponses.find(r => r.correct);

      if (bonne) {
        document.getElementById('reponse').textContent = `Bonne réponse. La bonne réponse est : "${q.reponses[idx].text}".`;
        document.getElementById('reponse').style.color = "green";
        score++;
      } else {
        document.getElementById('reponse').textContent = `Mauvaise réponse. La bonne réponse était : "${bonneRep.text}".`;
        document.getElementById('reponse').style.color = "red";
      }
      document.getElementById('explication').textContent = q.explication;

      // Changer le bouton selon la question
      if (currentQuestion < questionsTirage.length - 1) {
        document.getElementById('next-btn').style.display = "inline-block";
        const finBtn = document.getElementById('fin-btn');
        if (finBtn) finBtn.style.display = "none";
      } else {
        document.getElementById('next-btn').style.display = "none";
        let finBtn = document.getElementById('fin-btn');
        if (!finBtn) {
          finBtn = document.createElement('button');
          finBtn.id = 'fin-btn';
          finBtn.textContent = 'Fin du quiz';
          finBtn.onclick = afficherScore;
          finBtn.style.display = "inline-block";
          document.getElementById('quiz-section').appendChild(finBtn);
        } else {
          finBtn.style.display = "inline-block";
        }
      }
    }

    function questionSuivante() {
      currentQuestion++;
      if (currentQuestion < questionsTirage.length) {
        afficherQuestion();
      } else {
        afficherScore();
      }
    }

    function afficherScore() {
      document.getElementById('quiz-section').style.display = 'none';
      document.getElementById('result-section').style.display = 'flex';
      document.getElementById('score').innerHTML =
        "Votre score&nbsp;: <strong>" + score + " / " + questionsTirage.length + "</strong>";
      // Masquer le bouton fin si présent
      const finBtn = document.getElementById('fin-btn');
      if (finBtn) finBtn.style.display = "none";
    }
  </script>
</body>
</html>
